services:
  tx-tx-tx:
    build:
      context: .
      dockerfile: Dockerfile
    image: tx-tx-tx:latest
    container_name: tx-tx-tx
    environment:
      - ETH_PRIVATE_KEY_FILE=/run/secrets/eth_private_key
      - RUST_LOG=info
    volumes:
      - ./contracts:/app/contracts:ro
      - tx_artifacts:/app/artifacts
      - foundry_cache:/root/.foundry/cache
    restart: unless-stopped
    tty: true
    stdin_open: true

volumes:
  tx_artifacts:
    driver: local
  foundry_cache:
    driver: local